---
import BaseLayout from './BaseLayout.astro';

export interface Props {
  frontmatter: {
    term: string;
    category: 'epistemology' | 'methodology' | 'practice' | 'philosophy';
    thinker?: string;
    bookRef?: string;
    relatedTerms: string[];
    tags: string[];
    difficulty: 'beginner' | 'intermediate' | 'advanced';
  };
}

const { frontmatter } = Astro.props;
const { term, category, thinker, bookRef, relatedTerms, tags, difficulty } = frontmatter;

const categoryColors = {
  epistemology: 'bg-blue-100 text-blue-800',
  methodology: 'bg-purple-100 text-purple-800',
  practice: 'bg-green-100 text-green-800',
  philosophy: 'bg-red-100 text-red-800',
};

const difficultyEmoji = {
  beginner: '⭐',
  intermediate: '⭐⭐',
  advanced: '⭐⭐⭐',
};
---

<BaseLayout title={`${term} - Glossary`} description={`Learn about ${term} in our knowledge management glossary.`}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
      <!-- Sidebar -->
      <aside class="lg:col-span-1">
        <div class="sticky top-24 space-y-6">
          <div class="bg-white rounded-lg border border-gray-200 p-4">
            <h3 class="font-semibold text-gray-900 mb-3">Category</h3>
            <span class={`inline-block px-3 py-1 rounded-full text-sm font-medium ${categoryColors[category]}`}>
              {category}
            </span>
          </div>

          {thinker && (
            <div class="bg-white rounded-lg border border-gray-200 p-4">
              <h3 class="font-semibold text-gray-900 mb-2">Key Thinker</h3>
              <p class="text-gray-700 text-sm">{thinker}</p>
            </div>
          )}

          {bookRef && (
            <div class="bg-white rounded-lg border border-gray-200 p-4">
              <h3 class="font-semibold text-gray-900 mb-2">Reference</h3>
              <p class="text-gray-700 text-sm italic">{bookRef}</p>
            </div>
          )}

          <div class="bg-white rounded-lg border border-gray-200 p-4">
            <h3 class="font-semibold text-gray-900 mb-2">Difficulty</h3>
            <p class="text-2xl">{difficultyEmoji[difficulty]}</p>
          </div>

          {tags.length > 0 && (
            <div class="bg-white rounded-lg border border-gray-200 p-4">
              <h3 class="font-semibold text-gray-900 mb-3">Tags</h3>
              <div class="flex flex-wrap gap-2">
                {tags.map(tag => (
                  <span class="inline-block px-2 py-1 rounded bg-gray-100 text-gray-700 text-xs">
                    {tag}
                  </span>
                ))}
              </div>
            </div>
          )}
        </div>
      </aside>

      <!-- Main Content -->
      <article class="lg:col-span-3">
        <div class="bg-white rounded-lg border border-gray-200 p-8">
          <h1 class="text-4xl font-bold text-gray-900 mb-6">{term}</h1>

          <div class="glossary-content prose prose-lg max-w-none">
            <slot />
          </div>

          {relatedTerms.length > 0 && (
            <div class="mt-12 pt-8 border-t border-gray-200">
              <h2 class="text-2xl font-bold text-gray-900 mb-4">Related Terms</h2>
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                {relatedTerms.map(relatedTerm => (
                  <a
                    href={`/glossary/${relatedTerm.toLowerCase().replace(/\s+/g, '-')}`}
                    class="block p-4 rounded-lg border border-gray-200 hover:border-epistemology hover:bg-blue-50 transition-all"
                  >
                    <span class="text-gray-900 font-medium">{relatedTerm}</span>
                  </a>
                ))}
              </div>
            </div>
          )}
        </div>
      </article>
    </div>
  </div>
</BaseLayout>
